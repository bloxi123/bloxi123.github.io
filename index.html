<!DOCTYPE html>
<html>
<head>
    <title>Command Output</title>
    <style>
        body {
            background-color: #1e1e1e;
            color: #fff;
            font-family: 'Consolas', monospace;
            margin: 20px;
        }
        #output {
            background-color: #2d2d2d;
            padding: 20px;
            border-radius: 5px;
            white-space: pre-wrap;
            word-wrap: break-word;
            font-size: 14px;
            line-height: 1.4;
        }
        .error {
            color: #ff6b6b;
        }
        .timestamp {
            color: #888;
            font-size: 12px;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="timestamp" id="timestamp"></div>
    <div id="output">Waiting for command...</div>

    <script>
        const outputDiv = document.getElementById('output');
        const timestampDiv = document.getElementById('timestamp');
        
        function updateTimestamp() {
            const now = new Date();
            timestampDiv.textContent = `Last updated: ${now.toLocaleString()}`;
        }

        async function fetchOutput() {
            try {
                const response = await fetch('http://localhost:5000/get_latest');
                const data = await response.json();
                
                let formattedOutput = data.output;
                outputDiv.textContent = formattedOutput;
                
                if (data.error) {
                    outputDiv.textContent += `\n\nError: ${data.error}`;
                }
                
                updateTimestamp();
            } catch (error) {
                outputDiv.textContent = `Error connecting to local server: ${error}`;
            }
        }

        // Poll for updates every second
        setInterval(fetchOutput, 1000);
        
        // Initial fetch
        fetchOutput();
    </script>
</body>
</html>
